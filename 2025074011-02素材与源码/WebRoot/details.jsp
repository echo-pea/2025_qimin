<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>欢迎页面-X-admin2.0</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="./css/font.css">
<link rel="stylesheet" href="./css/xadmin.css">
<script type="text/javascript"
	src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="./lib/layui/layui.js"
	charset="utf-8"></script>
<script type="text/javascript" src="./js/xadmin.js"></script>
<link href="css/bootstrap.min.css" rel="stylesheet" />
    	<link href="css/bootstrap-switch.min.css" rel="stylesheet" />
   		 <script src="js/jquery-3.3.1.min.js"></script>
   		 <script src="js/bootstrap.min.js"></script>
    	<script src="js/bootstrap-switch.min.js"></script>
</head>
<body>
	<div class="x-body layui-anim layui-anim-up">
		<blockquote class="layui-elem-quote">
			欢迎管理员： <span class="x-red">${sessionScope.username }</span>！
		</blockquote>
		<fieldset class="layui-elem-field">
			<legend>数据统计</legend>
			<div class="layui-field-box">
				<div class="layui-col-md12">
					<div class="layui-card">
						<div class="layui-card-body">
							<div class="layui-carousel x-admin-carousel x-admin-backlog"
								lay-anim="" lay-indicator="inside" lay-arrow="none"
								style="width: 100%; height: 90px;">
								<div carousel-item="">
									<ul class="layui-row layui-col-space10 layui-this">
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>空气温度</h3>
												<p>
													<cite>${param.airTemperature }℃</cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>空气湿度</h3>
												<p>
													<cite>${param.airHhumidity }%</cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>光照度</h3>
												<p>
													<cite>${param.Illuminance }LX</cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>土壤温度</h3>
												<p>
													<cite>${param.soilTemperature }℃</cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>土壤湿度</h3>
												<p>
													<cite>${param.soilHumidity }%</cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>二氧化碳浓度</h3>
												<p>
													<cite>${param.co2 }ppm</cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>PH</h3>
												<p>
													<cite>${param.ph }PH</cite>
												</p>
										</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</fieldset>
		<fieldset class="layui-elem-field">
			<legend>数据统计</legend>
			<div class="layui-field-box">
				<div class="layui-col-md12">
					<div class="layui-card">
						<div class="layui-card-body">
							<div class="layui-carousel x-admin-carousel x-admin-backlog"
								lay-anim="" lay-indicator="inside" lay-arrow="none"
								style="width: 100%; height: 90px;">
								<div carousel-item="">
									<ul class="layui-row layui-col-space10 layui-this">
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>风机阀</h3>
												<p>
													<cite><input name="status" id="风机阀" type="checkbox" data-size="small"> </cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>灌溉阀</h3>
												<p>
													<cite><input name="status" id="灌溉阀" type="checkbox" data-size="small"> </cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>遮阳帘</h3>
												<p>
													<cite><input name="status" id="遮阳帘" type="checkbox" data-size="small"> </cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>灯</h3>
												<p>
													<cite><input name="status" id="灯" type="checkbox" data-size="small"> </cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>水帘</h3>
												<p>
													<cite><input name="status" id="水帘" type="checkbox" data-size="small"> </cite>
												</p>
										</a></li>
										<li class="layui-col-xs2"><a href="javascript:;"
											class="x-admin-backlog-body">
												<h3>加湿器</h3>
												<p>
													<cite><input name="status" id="加湿器" type="checkbox" data-size="small"> </cite>
												</p>
										</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</fieldset>
		
		<fieldset class="layui-elem-field">
			<legend>详细折线图</legend>
			<label class="layui-form-label">选择参数：</label>
			<div class="layui-input-inline">
				<select name="time" id="time">
					<option value="minute">过去1小时</option>
					<option value="hour">过去24小时</option>
					<option value="week">过去一周</option>
					<option value="month">过去一个月</option>
				</select>
			</div>
			<div class="layui-input-inline">
				<select name="property" id="property">
					<option id="airTemperature" value="169G45YEMR28">空气温度</option>
					<option id="airHhumidity" value="Q9NSL45O0GME">空气湿度</option>
					<option id="Illuminance" value="XLQZ2AF6IGDC">光照</option>
					<option id="soilTemperature" value="MY6U10NVHF87">土壤温度</option>
					<option id="soilHumidity" value="UI5S47ME08WT">土壤湿度</option>
					<option id="co2" value="E7TPAF36GZ0H">CO2浓度</option>
					<option id="ph" value="3WUSL8BX24GF">PH值</option>
				</select>
			</div>
			<div class="x-body">
				<div id="main" style="width: 100%;height:350px;"></div>
			</div>
			<script src="//cdn.bootcss.com/echarts/3.3.2/echarts.min.js"
				charset="utf-8">
			</script>
			<script type="text/javascript" src="./js/chartUtil.js"></script>
			<script type="text/javascript" src="./js/util.js"></script>
			<script type="text/javascript" src="./js/controller.js"></script>
			<script type="text/javascript" src="js/jquery.cookie.js"></script>
			<script type="text/javascript">
				var sensor = '${param.code }';
			</script>
			<script>
				$(document).ready(function() {
					var senserurl = senserUrl(sensor);
					var data = getJSONS(senserurl,
						"get",
						{
							"Authorization" : 'Bearer ' + $.cookie("Token")
						},
						{});
					var rows = new Array();
					$.each(data.data, function(index, value) {
						var message = {
							name : value.name
						};
						if (value.name == "空气温度") {
							message.airTemperature = value.code;
						} else if (value.name == "空气湿度") {
							message.airHhumidity = value.code;
						} else if (value.name == "光照度") {
							message.Illuminance = value.code;
						} else if (value.name == "土壤温度") {
							message.soilTemperature = value.code;
						} else if (value.name == "土壤湿度") {
							message.soilHumidity = value.code;
						} else if (value.name == "二氧化碳浓度") {
							message.co2 = value.code;
						} else if (value.name == "土壤PH值") {
							message.ph = value.code;
						}
						rows[index] = message;
					});
					$("#airTemperature").val(rows[0].airTemperature);
					$("#airHhumidity").val(rows[1].airHhumidity);
					$("#Illuminance").val(rows[2].Illuminance);
					$("#soilTemperature").val(rows[3].soilTemperature);
					$("#soilHumidity").val(rows[4].soilHumidity);
					$("#co2").val(rows[5].co2);
					$("#ph").val(rows[6].ph);
				});
			</script>
		</fieldset>
</body>
</html>